<!DOCTYPE html>
<html lang="mg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Microtache - Plateforme de Travail Professionnel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* CSS existant inchangé */
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --primary-light: #dbeafe;
      --secondary: #64748b;
      --accent: #f1f5f9;
      --background: #f8fafc;
      --surface: #ffffff;
      --text: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius: 12px;
      --radius-sm: 8px;
      --transition: all 0.2s ease-in-out;
      --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --gradient-success: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--text);
      line-height: 1.6;
      font-size: 16px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Pages */
    .page {
      display: none;
      flex: 1;
      padding: 2rem 1rem;
      animation: fadeIn 0.5s ease-out;
    }

    .page.active {
      display: block;
    }

    /* ========== NOUVEAUX STYLES POUR PAGES AUTH ========== */
    /* Container principal amélioré */
    .auth-container {
      max-width: 480px;
      margin: 2rem auto;
      padding: 1.5rem;
    }

    /* Carte d'authentification professionnelle */
    .auth-card {
      background: var(--surface);
      border-radius: 20px;
      padding: 3rem 2.5rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      text-align: center;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    .auth-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    /* Logo amélioré */
    .auth-logo {
      font-size: 3.5rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .auth-logo i {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      padding: 1rem;
      border-radius: 50%;
      background-color: rgba(37, 99, 235, 0.1);
    }

    /* Titres améliorés */
    .auth-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .auth-subtitle {
      color: var(--text-muted);
      margin-bottom: 2.5rem;
      font-size: 1.1rem;
      line-height: 1.8;
    }

    /* Formulaires améliorés */
    .form-group {
      margin-bottom: 1.75rem;
      text-align: left;
      position: relative;
    }

    .form-label {
      display: block;
      margin-bottom: 0.75rem;
      font-weight: 600;
      color: var(--text);
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .form-label i {
      color: var(--primary);
    }

    .form-input {
      width: 100%;
      padding: 1rem 1.25rem;
      border: 2px solid var(--border);
      border-radius: 12px;
      font-family: inherit;
      font-size: 1rem;
      transition: var(--transition);
      background: var(--accent);
      color: var(--text);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      background: white;
      transform: translateY(-2px);
    }

    /* Boutons améliorés */
    .auth-btn {
      width: 100%;
      background: var(--gradient-primary);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
      letter-spacing: 0.5px;
    }

    .auth-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(37, 99, 235, 0.2);
    }

    .auth-btn:active {
      transform: translateY(-1px);
    }

    /* Lien amélioré */
    .auth-link {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
      display: inline-block;
      padding: 0.5rem;
      border-radius: 6px;
    }

    .auth-link:hover {
      text-decoration: none;
      background: rgba(37, 99, 235, 0.1);
      transform: translateX(5px);
    }

    /* Présentation du travail */
    .work-presentation {
      margin-top: 3rem;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
      border-radius: 20px;
      border: 1px solid rgba(37, 99, 235, 0.1);
    }

    .presentation-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text);
      text-align: center;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .feature-item {
      text-align: center;
      padding: 1.5rem;
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .feature-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .feature-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .feature-desc {
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* Testimonials */
    .testimonial-slider {
      margin-top: 2rem;
      padding: 1.5rem;
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    .testimonial {
      text-align: center;
      font-style: italic;
      color: var(--text-muted);
      line-height: 1.8;
    }

    .testimonial-author {
      margin-top: 1rem;
      font-weight: 600;
      color: var(--primary);
    }

    /* ========== NOUVEAUX STYLES POUR HEADER ========== */
    /* Header professionnel */
    header {
      background: white;
      color: var(--text);
      padding: 1rem 1.25rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--text);
    }

    .logo i {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2rem;
    }

    /* Menu Hamburger */
    .hamburger {
      display: none;
      flex-direction: column;
      gap: 4px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      z-index: 1001;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background: var(--text);
      border-radius: 2px;
      transition: var(--transition);
    }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }

    /* Navigation améliorée */
    .nav-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .nav-link {
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
    }

    .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-primary);
      opacity: 0;
      transition: var(--transition);
      z-index: -1;
    }

    .nav-link:hover {
      color: white;
      transform: translateY(-2px);
    }

    .nav-link:hover::before {
      opacity: 1;
    }

    .nav-link i {
      font-size: 1.1rem;
    }

    .nav-link.active {
      background: var(--gradient-primary);
      color: white;
      box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
    }

    /* ========== STYLES EXISTANTS ========== */
    .main-container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1.25rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      margin-bottom: 1.5rem;
      border: 1px solid var(--border);
      transition: var(--transition);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text);
    }

    /* Sections Footer amélioré */
    .sections-footer {
      background: white;
      border-top: 1px solid var(--border);
      padding: 1.5rem 1rem;
      margin-top: auto;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 99;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.98);
    }

    .sections-grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 0.75rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-btn {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.75rem 0.5rem;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: var(--text);
      text-decoration: none;
      position: relative;
      overflow: hidden;
    }

    .section-btn:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border-color: var(--primary);
    }

    .section-btn.active {
      background: var(--gradient-primary);
      color: white;
      border-color: transparent;
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
    }

    .section-btn i {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .section-btn .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--error);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 600;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-bottom: 140px;
      animation: fadeIn 0.5s ease-out;
    }

    /* Video Section améliorée */
    .videos-section {
      margin-bottom: 2rem;
    }

    .video-card {
      margin-bottom: 2rem;
      background: var(--surface);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: var(--transition);
    }

    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
    }

    .video-container {
      width: 100%;
      border-radius: 16px;
      margin-bottom: 1.5rem;
      background: #000;
      position: relative;
      padding-top: 56.25%;
      overflow: hidden;
    }

    .video-player {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 16px;
      border: none;
    }

    .video-actions {
      display: flex;
      gap: 1rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
    }

    .video-action {
      background: var(--accent);
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: var(--transition);
      font-weight: 600;
      color: var(--text);
    }

    .video-action:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    .download-btn {
      background: var(--gradient-success);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: var(--transition);
      text-decoration: none;
      font-weight: 600;
    }

    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
    }

    .registration-btn {
      background: var(--gradient-secondary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: var(--transition);
      text-decoration: none;
      font-weight: 600;
    }

    .registration-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(240, 147, 251, 0.3);
    }

    /* Notifications améliorées */
    .notification-item {
      padding: 1.25rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      transition: var(--transition);
      border-radius: 12px;
      margin-bottom: 0.5rem;
    }

    .notification-item:hover {
      background: var(--accent);
      transform: translateX(5px);
    }

    .notification-item.unread {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      border-left: 4px solid var(--primary);
    }

    .notification-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gradient-primary);
      color: white;
      flex-shrink: 0;
    }

    .notification-content {
      flex: 1;
    }

    .notification-text {
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .notification-time {
      font-size: 0.85rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Annonces améliorées */
    .annonce-item {
      margin-bottom: 2rem;
      padding: 2rem;
      border: 1px solid var(--border);
      border-radius: 20px;
      background: white;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .annonce-item:hover {
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      transform: translateY(-3px);
    }

    .annonce-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--border);
    }

    .annonce-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .annonce-date {
      color: var(--text-muted);
      font-size: 0.9rem;
      background: var(--accent);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-weight: 600;
    }

    .annonce-content {
      line-height: 1.8;
      font-size: 1.05rem;
      color: var(--text);
    }

    .annonce-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
    }

    /* Bonus Page améliorée */
    .bonus-container {
      max-width: 600px;
      margin: 2rem auto;
    }

    .bonus-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 30px;
      padding: 4rem 3rem;
      box-shadow: 0 30px 60px rgba(102, 126, 234, 0.4);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .bonus-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      animation: rotate 20s linear infinite;
    }

    .bonus-logo {
      font-size: 5rem;
      color: white;
      margin-bottom: 2rem;
      position: relative;
      z-index: 1;
      animation: pulse 2s infinite;
    }

    .bonus-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1.5rem;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .bonus-message {
      font-size: 1.3rem;
      margin-bottom: 3rem;
      line-height: 1.8;
      position: relative;
      z-index: 1;
      background: rgba(255,255,255,0.1);
      padding: 2rem;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .bonus-btn {
      background: white;
      color: var(--primary);
      border: none;
      border-radius: 50px;
      padding: 1.25rem 3rem;
      font-size: 1.3rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      z-index: 1;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .bonus-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    /* Info Page améliorée */
    .info-container {
      max-width: 700px;
      margin: 2rem auto;
    }

    .info-card {
      background: white;
      border-radius: 30px;
      padding: 3rem;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .info-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: var(--gradient-primary);
    }

    .info-content {
      text-align: left;
      margin: 2.5rem 0;
      line-height: 1.8;
      font-size: 1.1rem;
      color: var(--text);
    }

    .info-content ul {
      padding-left: 2rem;
      margin: 1.5rem 0;
    }

    .info-content li {
      margin-bottom: 1rem;
      padding-left: 0.5rem;
      position: relative;
    }

    .info-content li::before {
      content: '✓';
      color: var(--success);
      font-weight: bold;
      position: absolute;
      left: -1.5rem;
    }

    /* Animations améliorées */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }

    /* Menu mobile */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100vh;
      background: white;
      box-shadow: 10px 0 30px rgba(0, 0, 0, 0.1);
      padding: 5rem 2rem 2rem;
      transition: var(--transition);
      z-index: 999;
      overflow-y: auto;
    }

    .mobile-menu.active {
      left: 0;
    }

    .mobile-menu .nav-link {
      display: flex;
      align-items: center;
      padding: 1rem 1.5rem;
      margin-bottom: 0.5rem;
      border-radius: 12px;
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
    }

    .mobile-menu .nav-link:hover {
      background: var(--gradient-primary);
      color: white;
      transform: translateX(10px);
    }

    .mobile-menu .nav-link i {
      width: 24px;
      text-align: center;
    }

    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: none;
      z-index: 998;
    }

    .menu-overlay.active {
      display: block;
    }

    /* Responsive amélioré */
    @media (max-width: 1024px) {
      .sections-grid {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 1fr);
      }
      
      .features-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }
      
      .nav-container {
        display: none;
      }
      
      .sections-grid {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 1fr);
      }
      
      .auth-card {
        padding: 2rem 1.5rem;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .bonus-card {
        padding: 3rem 1.5rem;
        border-radius: 20px;
      }
      
      .bonus-title {
        font-size: 2rem;
      }
      
      .bonus-message {
        font-size: 1.1rem;
        padding: 1.5rem;
      }
      
      .info-card {
        padding: 2rem 1.5rem;
        border-radius: 20px;
      }
      
      .annonce-header {
        flex-direction: column;
        gap: 1rem;
      }
      
      .annonce-date {
        align-self: flex-start;
      }
      
      .video-actions {
        flex-direction: column;
      }
      
      .download-btn, .registration-btn {
        width: 100%;
        justify-content: center;
      }
      
      .work-presentation {
        padding: 1.5rem;
        margin-top: 2rem;
      }
    }

    @media (max-width: 480px) {
      .sections-grid {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 0.5rem;
      }
      
      .section-btn {
        padding: 0.6rem 0.3rem;
        font-size: 0.65rem;
      }
      
      .section-btn i {
        font-size: 1.2rem;
      }
      
      .main-content {
        margin-bottom: 160px;
      }
      
      .sections-footer {
        padding: 1rem 0.5rem;
      }
      
      .auth-title {
        font-size: 1.75rem;
      }
      
      .auth-subtitle {
        font-size: 1rem;
      }
      
      .mobile-menu {
        width: 280px;
      }
    }

    /* Animation pour la page d'accueil */
    .welcome-hero {
      text-align: center;
      padding: 4rem 1rem;
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
      border-radius: 30px;
      margin: 2rem 0;
      position: relative;
      overflow: hidden;
    }

    .welcome-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%232563eb' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .welcome-hero i {
      font-size: 4rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1.5rem;
      position: relative;
      z-index: 1;
    }

    .welcome-hero h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--text);
      position: relative;
      z-index: 1;
    }

    .welcome-hero p {
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto 2rem;
      font-size: 1.1rem;
      line-height: 1.8;
      position: relative;
      z-index: 1;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin: 3rem 0;
    }

    .stat-card {
      text-align: center;
      padding: 2rem;
      background: white;
      border-radius: 20px;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: var(--text-muted);
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Progress bar pour le profil */
    .progress-bar {
      height: 8px;
      background: var(--accent);
      border-radius: 4px;
      overflow: hidden;
      margin: 1rem 0;
    }

    .progress-fill {
      height: 100%;
      background: var(--gradient-primary);
      border-radius: 4px;
      transition: width 1s ease-in-out;
    }
  </style>
</head>
<body>
  <!-- Overlay pour menu mobile -->
  <div class="menu-overlay" id="menuOverlay" onclick="toggleMobileMenu()"></div>

  <!-- Menu mobile -->
  <div class="mobile-menu" id="mobileMenu">
    <a class="nav-link" href="#" onclick="showAdminLogin()">
      <i class="fas fa-user-shield"></i>
      <span>Admin</span>
    </a>
    <a class="nav-link" href="#" onclick="logout()">
      <i class="fas fa-sign-out-alt"></i>
      <span>Déconnexion</span>
    </a>
  </div>

  <!-- Pages -->
  <div id="signupPage" class="page">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-briefcase"></i>
        </div>
        <h1 class="auth-title">Inscription Professionnelle</h1>
        <p class="auth-subtitle">Rejoignez notre plateforme de travail et démarrez votre carrière en ligne</p>
        
        <form id="signupForm">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-user"></i>
              Nom complet
            </label>
            <input type="text" class="form-input" id="signupName" required placeholder="Entrez votre nom complet">
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-envelope"></i>
              Email professionnel
            </label>
            <input type="email" class="form-input" id="signupEmail" required placeholder="exemple@email.com">
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-lock"></i>
              Mot de passe sécurisé
            </label>
            <input type="password" class="form-input" id="signupPassword" required placeholder="Minimum 8 caractères">
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-calendar"></i>
              Date de naissance
            </label>
            <input type="date" class="form-input" id="signupBirthdate" required>
          </div>
          
          <button type="submit" class="auth-btn">
            <i class="fas fa-user-plus"></i>
            Créer mon compte
          </button>
        </form>
        
        <p>Déjà membre? <a href="#" class="auth-link" onclick="showPage('loginPage')">Connectez-vous ici</a></p>
        
        <!-- Présentation du travail -->
        <div class="work-presentation">
          <h3 class="presentation-title">Pourquoi nous rejoindre ?</h3>
          <div class="features-grid">
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <h4 class="feature-title">Revenus Stables</h4>
              <p class="feature-desc">Générez des revenus complémentaires avec des micro-tâches rémunérées</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-graduation-cap"></i>
              </div>
              <h4 class="feature-title">Formation Continue</h4>
              <p class="feature-desc">Accédez à des formations gratuites pour développer vos compétences</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-users"></i>
              </div>
              <h4 class="feature-title">Communauté Active</h4>
              <p class="feature-desc">Rejoignez une communauté d'entraide et de partage d'opportunités</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <h4 class="feature-title">Sécurité Garantie</h4>
              <p class="feature-desc">Plateforme sécurisée avec paiements garantis et support dédié</p>
            </div>
          </div>
          
          <div class="testimonial-slider">
            <div class="testimonial">
              "Grâce à cette plateforme, j'ai pu doubler mes revenus mensuels tout en travaillant de chez moi. Les formations sont exceptionnelles !"
              <div class="testimonial-author">- Jean R., Membre depuis 6 mois</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="loginPage" class="page">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-briefcase"></i>
        </div>
        <h1 class="auth-title">Bienvenue de retour</h1>
        <p class="auth-subtitle">Connectez-vous pour accéder à votre espace de travail</p>
        
        <form id="loginForm">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-envelope"></i>
              Email
            </label>
            <input type="email" class="form-input" id="loginEmail" required placeholder="Votre email">
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-lock"></i>
              Mot de passe
            </label>
            <input type="password" class="form-input" id="loginPassword" required placeholder="Votre mot de passe">
          </div>
          
          <button type="submit" class="auth-btn">
            <i class="fas fa-sign-in-alt"></i>
            Se connecter
          </button>
        </form>
        
        <p>Nouveau ici? <a href="#" class="auth-link" onclick="showPage('signupPage')">Créez un compte gratuitement</a></p>
        
        <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(37, 99, 235, 0.05); border-radius: 12px;">
          <h4 style="margin-bottom: 1rem; color: var(--primary);">
            <i class="fas fa-lightbulb"></i> Conseils de connexion
          </h4>
          <ul style="text-align: left; color: var(--text-muted); font-size: 0.9rem; padding-left: 1.5rem;">
            <li>Utilisez l'email avec lequel vous vous êtes inscrit</li>
            <li>Vérifiez votre connexion internet</li>
            <li>Contactez le support en cas d'oubli de mot de passe</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Nouvelle Page Info -->
  <div id="infoPage" class="page">
    <div class="info-container">
      <div class="info-card">
        <div class="auth-logo">
          <i class="fas fa-info-circle"></i>
        </div>
        <h1 class="auth-title">FANAMARIHANA</h1>
        
        <div class="info-content">
          <p style="font-size: 1.2rem; margin-bottom: 2rem; font-weight: 600; color: var(--primary);">
            Ny site web asa en ligne mada dia tsy site fiasana fa fampianarana asa miampy fanomezana asa toy ireto manaraka ireto :
          </p>
          
          <ul>
            <li><strong style="color: var(--primary);">Microtache</strong> ( asa gratuit)</li>
            <li><strong style="color: var(--primary);">Investissement</strong> ( asa mampiasa vola , misy fanarahamaso ny site )</li>
            <li><strong style="color: var(--primary);">Trading bot</strong> ( Fanaovana trading amin'ny alalan'i robot)</li>
            <li><strong style="color: var(--primary);">Live</strong> ( asa gratuit, manao live )</li>
          </ul>
          
          <p style="margin-top: 2rem; padding: 1.5rem; background: rgba(37, 99, 235, 0.05); border-radius: 12px; font-style: italic;">
            <i class="fas fa-exclamation-circle" style="color: var(--warning);"></i>
            Fampianarana manao ireo karazana asa ireo no atao ato fa tsy site fiasana.
          </p>
        </div>
        
        <button class="auth-btn" onclick="acceptInfo()">
          <i class="fas fa-check-circle"></i>
          J'accepte et continue
        </button>
      </div>
    </div>
  </div>

  <!-- Nouvelle Page Bonus -->
  <div id="bonusPage" class="page">
    <div class="bonus-container">
      <div class="bonus-card">
        <div class="bonus-logo">
          <i class="fas fa-gift"></i>
        </div>
        <h1 class="bonus-title">OFFRE SPÉCIALE</h1>
        <div class="bonus-message" id="bonusMessage">
          <!-- Le message sera rempli dynamiquement avec le nom d'utilisateur -->
        </div>
        <button class="bonus-btn" onclick="acceptBonus()">
          <i class="fas fa-check-circle"></i>
          Accepter l'offre
        </button>
      </div>
    </div>
  </div>

  <div id="paymentPage" class="page">
    <div class="payment-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-credit-card"></i>
        </div>
        <h1 class="auth-title">Choisissez votre plan</h1>
        <p class="auth-subtitle">Sélectionnez le forfait qui vous convient pour débloquer toutes les fonctionnalités</p>
        
        <div class="bank-info">
          <h3 class="bank-info-title">
            <i class="fas fa-university"></i>
            Informations de paiement
          </h3>
          <div class="bank-detail">
            <span class="bank-detail-label">Numéro de compte:</span>
            <span style="font-weight: 600; color: var(--primary);">0323911654</span>
          </div>
          <div class="bank-detail">
            <span class="bank-detail-label">Nom:</span>
            <span style="font-weight: 600;">RAVELOMANANTSOA URMIN</span>
          </div>
          <div style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
            <p style="margin: 0; color: var(--success); font-weight: 600;">
              <i class="fas fa-info-circle"></i>
              Veuillez effectuer le virement avant de cliquer sur "J'ai payé"
            </p>
          </div>
        </div>
        
        <div class="payment-plans">
          <div class="payment-plan" onclick="selectPlan('premium')">
            <h3 class="plan-name">Premium</h3>
            <div class="plan-price">1500 Ar/mois</div>
            <ul class="plan-features">
              <li><i class="fas fa-check"></i> Mahita ireo asa vaovao mivoaka foana</li>
              <li><i class="fas fa-check"></i> Mahazo bot trading ( ho an'i dreive)</li>
              <li><i class="fas fa-check"></i> Mahazo fampianarana manokatra compte réseaux sociaux</li>
              <li><i class="fas fa-check"></i> Aloavy ny droit de formation</li>
              <li><i class="fas fa-check"></i> Alefaso amin'ny laharana mipetraka eo ambony</li>
              <li><i class="fas fa-check"></i> Fenoy ny informations an'ilay fandefasana vola</li>
            </ul>
          </div>
        </div>
        
        <!-- Formulaire d'informations de paiement -->
        <div id="paymentFormContainer" style="display: none; margin-top: 2rem;">
          <h3 style="margin-bottom: 1.5rem; color: var(--primary); font-weight: 700;">
            <i class="fas fa-file-invoice"></i>
            Informations de virement
          </h3>
          <form id="paymentInfoForm">
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-phone"></i>
                1. Numéro de téléphone de l'expéditeur *
              </label>
              <input type="text" class="form-input" id="senderPhone" required placeholder="Numéro utilisé pour envoyer l'argent">
            </div>
            
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-user-tag"></i>
                2. Nom complet de l'expéditeur *
              </label>
              <input type="text" class="form-input" id="senderName" required placeholder="Nom de la personne qui a envoyé l'argent">
            </div>
            
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-calendar-check"></i>
                3. Date d'envoi de l'argent *
              </label>
              <input type="date" class="form-input" id="sendDate" required>
            </div>
            
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-map-marker-alt"></i>
                4. Lieu d'envoi *
              </label>
              <input type="text" class="form-input" id="sendLocation" required placeholder="Ex: Antananarivo, Tamatave, etc.">
            </div>
            
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-address-book"></i>
                5. Contact de l'expéditeur
              </label>
              <input type="text" class="form-input" id="senderContact" placeholder="Email ou autre numéro de contact">
              <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                <i class="fas fa-info-circle"></i>
                Pour vous contacter en cas de besoin
              </small>
            </div>
            
            <button type="submit" class="auth-btn">
              <i class="fas fa-paper-plane"></i> Envoyer les informations
            </button>
          </form>
        </div>
        
        <button class="auth-btn" id="paymentBtn" onclick="showPaymentForm()" style="background: var(--gradient-success);">
          <i class="fas fa-check-circle"></i> J'ai payé
        </button>
      </div>
    </div>
  </div>

  <div id="pendingPage" class="page">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-clock"></i>
        </div>
        <h1 class="auth-title">Paiement en traitement</h1>
        <p class="auth-subtitle">Votre paiement est en cours de vérification par notre équipe</p>
        
        <div style="text-align: center; margin: 2rem 0;">
          <i class="fas fa-spinner fa-spin" style="font-size: 4rem; color: var(--primary);"></i>
        </div>
        
        <div style="background: rgba(37, 99, 235, 0.05); padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">
          <p style="color: var(--text); text-align: center; margin-bottom: 1rem;">
            <i class="fas fa-info-circle" style="color: var(--primary);"></i>
            Temps de traitement estimé : 24 heures maximum
          </p>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 70%;"></div>
          </div>
          <p style="text-align: center; color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">
            Vérification en cours...
          </p>
        </div>
        
        <p style="text-align: center; color: var(--text-muted);">
          Vous serez redirigé automatiquement une fois le paiement confirmé par l'administrateur.
        </p>
      </div>
    </div>
  </div>

  <div id="expiredPage" class="page">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h1 class="auth-title">Abonnement expiré</h1>
        <p class="auth-subtitle">Votre abonnement de 30 jours a expiré</p>
        
        <div style="text-align: center; margin: 2rem 0;">
          <i class="fas fa-calendar-times" style="font-size: 4rem; color: var(--warning);"></i>
        </div>
        
        <div style="background: rgba(245, 158, 11, 0.1); padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">
          <p style="color: var(--warning); text-align: center; font-weight: 600;">
            <i class="fas fa-exclamation-circle"></i>
            Veuillez renouveler votre abonnement pour continuer à utiliser la plateforme.
          </p>
        </div>
        
        <button class="auth-btn" onclick="showPage('paymentPage')" style="background: var(--gradient-secondary);">
          <i class="fas fa-sync-alt"></i>
          Renouveler l'abonnement
        </button>
      </div>
    </div>
  </div>

  <div id="adminPage" class="page">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">
          <i class="fas fa-user-shield"></i>
        </div>
        <h1 class="auth-title">Accès Administrateur</h1>
        <p class="auth-subtitle">Espace réservé aux administrateurs de la plateforme</p>
        
        <form id="adminLoginForm">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-key"></i>
              Code d'accès administrateur
            </label>
            <input type="password" class="form-input" id="adminCode" required placeholder="Entrez le code d'accès">
          </div>
          
          <button type="submit" class="auth-btn">
            <i class="fas fa-sign-in-alt"></i>
            Accéder au panel admin
          </button>
        </form>
        
        <p style="margin-top: 1.5rem;">
          <a href="#" class="auth-link" onclick="showPage('loginPage')">
            <i class="fas fa-arrow-left"></i>
            Retour à la connexion utilisateur
          </a>
        </p>
      </div>
    </div>
  </div>

  <div id="homePage" class="page active">
    <header>
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-briefcase"></i>
          <span>Mikotse Pro</span>
        </div>
        
        <!-- Bouton hamburger -->
        <button class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
          <span></span>
          <span></span>
          <span></span>
        </button>
        
        <!-- Navigation desktop -->
        <div class="nav-container">
          <a class="nav-link" href="#" onclick="showAdminLogin()">
            <i class="fas fa-user-shield"></i>
            Admin
          </a>
          <a class="nav-link" href="#" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            Déconnexion
          </a>
        </div>
      </div>
    </header>

    <div class="main-container">
      <!-- Main Content -->
      <main class="main-content">
        <div id="sectionContent">
          <div class="welcome-hero">
            <i class="fas fa-handshake"></i>
            <h1>Bienvenue sur Mikotse Pro</h1>
            <p>
              Votre plateforme professionnelle de travail en ligne. Accédez à des formations exclusives, 
              des opportunités de micro-tâches rémunérées et une communauté active pour développer vos compétences.
            </p>
            
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="stat-number" id="totalMembers">2500+</div>
                <div class="stat-label">Membres Actifs</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-tasks"></i>
                </div>
                <div class="stat-number" id="totalTasks">5000+</div>
                <div class="stat-label">Tâches Complétées</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-video"></i>
                </div>
                <div class="stat-number" id="totalVideos">120+</div>
                <div class="stat-label">Formations Disponibles</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-number" id="successRate">98%</div>
                <div class="stat-label">Taux de Satisfaction</div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Footer avec sections -->
    <div class="sections-footer">
      <div class="sections-grid">
        <button class="section-btn" onclick="showSection('profile')">
          <i class="fas fa-user"></i>
          <span>Profil</span>
        </button>
        
        <button class="section-btn" onclick="showSection('microtache')">
          <i class="fas fa-tasks"></i>
          <span>Microtache</span>
        </button>
        
        <button class="section-btn" onclick="showSection('annonces')">
          <i class="fas fa-bullhorn"></i>
          <span>Annonces</span>
        </button>
        
        <button class="section-btn" onclick="showSection('criptomonaie')">
          <i class="fas fa-coins"></i>
          <span>Criptomonaie</span>
        </button>
        
        <button class="section-btn" onclick="showSection('investissement')">
          <i class="fas fa-chart-line"></i>
          <span>Investissement</span>
        </button>
        
        <button class="section-btn" onclick="showSection('bot-trading')">
          <i class="fas fa-robot"></i>
          <span>Bot Trading</span>
        </button>
        
        <button class="section-btn" onclick="showSection('live')">
          <i class="fas fa-broadcast-tower"></i>
          <span>Live</span>
        </button>
        
        <button class="section-btn" onclick="showSection('notifications')">
          <i class="fas fa-bell"></i>
          <span>Notifications</span>
          <span class="notification-badge" id="notificationCount">0</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script>
    // Firebase Configuration (inchangé)
    const firebaseConfig = {
      apiKey: "AIzaSyBtq50XttR1S-f9RMo0otxx5jrRiY30QEE",
      authDomain: "miasamada-4f90a.firebaseapp.com",
      databaseURL: "https://miasamada-4f90a-default-rtdb.firebaseio.com",
      projectId: "miasamada-4f90a",
      storageBucket: "miasamada-4f90a.firebasestorage.app",
      messagingSenderId: "341483369374",
      appId: "1:341483369374:web:721451eb0df21d4ef45c8f",
      measurementId: "G-XTH1TCS8H4"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    const storage = firebase.storage();

    // Global variables
    let currentUser = null;
    let selectedPlan = null;
    const ADMIN_CODE = "080600";
    const BONUS_END_DATE = new Date('2025-12-25T23:59:59');

    // Fonction pour basculer le menu mobile
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const hamburger = document.getElementById('hamburger');
      const overlay = document.getElementById('menuOverlay');
      
      mobileMenu.classList.toggle('active');
      hamburger.classList.toggle('active');
      overlay.classList.toggle('active');
      
      // Empêcher le défilement du body quand le menu est ouvert
      document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
    }

    // Fermer le menu mobile si on clique sur un lien
    function closeMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const hamburger = document.getElementById('hamburger');
      const overlay = document.getElementById('menuOverlay');
      
      mobileMenu.classList.remove('active');
      hamburger.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Modifier la fonction showPage pour fermer le menu mobile
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      closeMobileMenu(); // Fermer le menu mobile si ouvert
    }

    // Modifier la fonction showSection pour fermer le menu mobile
    function showSection(section) {
      // Vérifier l'accès utilisateur
      if (!currentUser) {
        showPage('loginPage');
        return;
      }

      // Mettre à jour les boutons actifs
      document.querySelectorAll('.section-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.currentTarget.classList.add('active');
      
      // Charger le contenu de la section
      loadSectionContent(section);
      closeMobileMenu(); // Fermer le menu mobile
    }

    // Initialize the app
    function init() {
      setupEventListeners();
      checkAuthState();
      
      // Mettre à jour les statistiques
      updateStats();
    }

    // Fonction pour mettre à jour les statistiques
    function updateStats() {
      // Ces valeurs peuvent être récupérées de Firebase dans une version réelle
      const stats = {
        totalMembers: Math.floor(Math.random() * 1000) + 2500,
        totalTasks: Math.floor(Math.random() * 2000) + 5000,
        totalVideos: Math.floor(Math.random() * 50) + 120,
        successRate: 98
      };

      document.getElementById('totalMembers').textContent = stats.totalMembers + '+';
      document.getElementById('totalTasks').textContent = stats.totalTasks + '+';
      document.getElementById('totalVideos').textContent = stats.totalVideos + '+';
      document.getElementById('successRate').textContent = stats.successRate + '%';
    }

    // Check authentication state
    function checkAuthState() {
      auth.onAuthStateChanged((user) => {
        if (user) {
          currentUser = user;
          loadUserData(user.uid);
        } else {
          showPage('signupPage');
        }
      });
    }

    // Load user data from Firebase
    function loadUserData(userId) {
      const userRef = db.ref('users/' + userId);
      userRef.on('value', (snapshot) => {
        const userData = snapshot.val();
        if (userData) {
          checkUserAccess(userId, userData);
        }
      });
    }

    // Vérifier l'accès de l'utilisateur
    function checkUserAccess(userId, userData) {
      // Vérifier si l'utilisateur a accepté les informations
      if (!userData.infoAccepted) {
        showPage('infoPage');
        return;
      }

      // Vérifier si on est dans la période bonus
      if (isBonusPeriod() && !userData.bonusAccepted) {
        showBonusPage(userData.name);
        return;
      }

      // Vérifier le paiement pour l'accès aux sections
      checkPaymentStatus(userId);
    }

    // Vérifier si on est dans la période de bonus
    function isBonusPeriod() {
      const now = new Date();
      return now < BONUS_END_DATE;
    }

    // Accepter les informations
    function acceptInfo() {
      if (!currentUser) return;

      const userRef = db.ref('users/' + currentUser.uid);
      userRef.update({
        infoAccepted: true,
        infoAcceptedAt: Date.now()
      }).then(() => {
        // Vérifier si on est dans la période bonus
        if (isBonusPeriod()) {
          showBonusPage(currentUser.displayName || currentUser.email.split('@')[0]);
        } else {
          showPage('paymentPage');
        }
      });
    }

    // Afficher la page bonus
    function showBonusPage(userName) {
      const bonusMessage = document.getElementById('bonusMessage');
      bonusMessage.innerHTML = `
        <strong>SALAMA ${userName}</strong> Faly izahay manolotra ho anao ny fampianarana asa en ligne gratuit eto aminay. 
        Ity tolotra ity dia hifarana hatramin'ny le 25/12/2025 hoavy izao. 
        Tsindrio ny bokitra Accepté eo ambany mba afahanao taditra amin'ny fampianarana.
      `;
      showPage('bonusPage');
    }

    // Accepter le bonus
    function acceptBonus() {
      if (!currentUser) return;

      const userRef = db.ref('users/' + currentUser.uid);
      userRef.update({
        bonusAccepted: true,
        bonusAcceptedAt: Date.now(),
        bonusExpiresAt: BONUS_END_DATE.getTime()
      }).then(() => {
        // Accès direct aux sections pendant la période bonus
        showPage('homePage');
        setupHomePage();
      });
    }

    // Check payment status
    function checkPaymentStatus(userId) {
      const paymentRef = db.ref('payments/' + userId);
      paymentRef.on('value', (snapshot) => {
        const paymentData = snapshot.val();
        
        if (paymentData && paymentData.status === 'confirmed') {
          // Check if subscription is still valid (30 days)
          const confirmedAt = paymentData.confirmedAt || paymentData.createdAt;
          const thirtyDaysInMs = 30 * 24 * 60 * 60 * 1000;
          const now = Date.now();
          
          if (now - confirmedAt < thirtyDaysInMs) {
            showPage('homePage');
            setupHomePage();
          } else {
            showPage('expiredPage');
          }
        } else if (paymentData && paymentData.status === 'pending') {
          showPage('pendingPage');
        } else {
          // Pas de paiement
          showPage('paymentPage');
        }
      });
    }

    // Select payment plan
    function selectPlan(plan) {
      selectedPlan = plan;
      document.querySelectorAll('.payment-plan').forEach(planEl => {
        planEl.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');
    }

    // Afficher le formulaire de paiement
    function showPaymentForm() {
      if (!selectedPlan) {
        alert('Veuillez sélectionner un plan');
        return;
      }
      
      document.getElementById('paymentBtn').style.display = 'none';
      document.getElementById('paymentFormContainer').style.display = 'block';
    }

    // Processus de paiement complet
    function processPayment() {
      if (!selectedPlan) {
        alert('Veuillez sélectionner un plan');
        return;
      }

      if (!currentUser) {
        alert('Utilisateur non connecté');
        return;
      }

      // Récupérer les informations du formulaire
      const senderPhone = document.getElementById('senderPhone').value;
      const senderName = document.getElementById('senderName').value;
      const sendDate = document.getElementById('sendDate').value;
      const sendLocation = document.getElementById('sendLocation').value;
      const senderContact = document.getElementById('senderContact').value;

      // Validation des champs obligatoires
      if (!senderPhone || !senderName || !sendDate || !sendLocation) {
        alert('Veuillez remplir tous les champs obligatoires (*)');
        return;
      }

      const paymentRef = db.ref('payments/' + currentUser.uid);
      paymentRef.set({
        plan: selectedPlan,
        amount: 1500,
        status: 'pending',
        createdAt: Date.now(),
        userId: currentUser.uid,
        userName: currentUser.displayName || currentUser.email.split('@')[0],
        userEmail: currentUser.email,
        senderPhone: senderPhone,
        senderName: senderName,
        sendDate: sendDate,
        sendLocation: sendLocation,
        senderContact: senderContact,
        paymentDate: new Date().toISOString()
      }).then(() => {
        showPage('pendingPage');
        
        // Envoyer aussi une copie admin
        const adminPaymentRef = db.ref('adminPayments').push();
        adminPaymentRef.set({
          userId: currentUser.uid,
          userName: currentUser.displayName || currentUser.email.split('@')[0],
          userEmail: currentUser.email,
          plan: selectedPlan,
          amount: 1500,
          status: 'pending',
          senderPhone: senderPhone,
          senderName: senderName,
          sendDate: sendDate,
          sendLocation: sendLocation,
          senderContact: senderContact,
          submittedAt: Date.now(),
          createdAt: new Date().toISOString()
        });
      }).catch((error) => {
        alert('Erreur lors de l\'enregistrement du paiement: ' + error.message);
      });
    }

    // Setup event listeners
    function setupEventListeners() {
      // Auth forms
      document.getElementById('signupForm').addEventListener('submit', handleSignup);
      document.getElementById('loginForm').addEventListener('submit', handleLogin);
      document.getElementById('adminLoginForm').addEventListener('submit', handleAdminLogin);

      // Formulaire d'informations de paiement
      document.getElementById('paymentInfoForm').addEventListener('submit', function(e) {
        e.preventDefault();
        processPayment();
      });
    }

    // Handle signup
    function handleSignup(e) {
      e.preventDefault();
      
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const birthdate = document.getElementById('signupBirthdate').value;

      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          
          // Save user data to Firebase
          const userRef = db.ref('users/' + user.uid);
          userRef.set({
            name: name,
            email: email,
            birthdate: birthdate,
            profilePicture: 'https://via.placeholder.com/120',
            bio: 'Aucune biographie',
            createdAt: Date.now(),
            infoAccepted: false,
            bonusAccepted: false
          });

          // Afficher la page info après inscription
          showPage('infoPage');
        })
        .catch((error) => {
          alert('Erreur lors de l\'inscription: ' + error.message);
        });
    }

    // Handle login
    function handleLogin(e) {
      e.preventDefault();
      
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // User signed in
          currentUser = userCredential.user;
          loadUserData(currentUser.uid);
        })
        .catch((error) => {
          alert('Erreur lors de la connexion: ' + error.message);
        });
    }

    // Handle admin login
    function handleAdminLogin(e) {
      e.preventDefault();
      
      const code = document.getElementById('adminCode').value;
      
      if (code === ADMIN_CODE) {
        window.location.href = 'admin.html';
      } else {
        alert('Code d\'accès incorrect');
      }
    }

    // Load section content
    function loadSectionContent(section) {
      const sectionContent = document.getElementById('sectionContent');
      
      switch(section) {
        case 'profile':
          loadProfileContent(sectionContent);
          break;
        case 'microtache':
          loadSectionVideos('microtache', sectionContent);
          break;
        case 'annonces':
          loadAnnoncesContent(sectionContent);
          break;
        case 'criptomonaie':
          loadSectionVideos('criptomonaie', sectionContent);
          break;
        case 'investissement':
          loadSectionVideos('investissement', sectionContent);
          break;
        case 'bot-trading':
          loadSectionVideos('bot-trading', sectionContent);
          break;
        case 'live':
          loadSectionVideos('live', sectionContent);
          break;
        case 'notifications':
          loadNotificationsContent(sectionContent);
          break;
        default:
          sectionContent.innerHTML = `
            <div class="welcome-hero">
              <i class="fas fa-cogs"></i>
              <h2>Contenu en développement</h2>
              <p>
                Cette section sera bientôt disponible. Nous travaillons activement sur son contenu 
                pour vous offrir la meilleure expérience possible.
              </p>
            </div>
          `;
      }
    }

    // Load videos by section
    function loadSectionVideos(section, container) {
      container.innerHTML = `
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">${getSectionName(section)} - Formations</h3>
            <div style="background: rgba(37, 99, 235, 0.1); padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.9rem; color: var(--primary); font-weight: 600;">
              <i class="fas fa-play-circle"></i> ${section === 'microtache' ? 'Gratuit' : 'Premium'}
            </div>
          </div>
          <div style="padding: 1.5rem;">
            <div id="${section}Videos">
              <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2.5rem; color: var(--primary);"></i>
                <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Chargement des formations...</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      loadSectionVideosFromFirebase(section);
    }

    // Load videos from Firebase by section
    function loadSectionVideosFromFirebase(section) {
      const videosRef = db.ref('sectionVideos').orderByChild('section').equalTo(section);
      videosRef.on('value', (snapshot) => {
        const videos = snapshot.val();
        const container = document.getElementById(section + 'Videos');
        
        if (!container) return;
        
        container.innerHTML = '';

        if (!videos) {
          container.innerHTML = `
            <div style="text-align: center; padding: 3rem;">
              <i class="fas fa-video-slash" style="font-size: 3.5rem; color: var(--text-muted);"></i>
              <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Aucune vidéo disponible pour cette section</p>
              <p style="margin-top: 0.5rem; color: var(--text-muted);">De nouvelles formations arrivent bientôt !</p>
            </div>
          `;
          return;
        }

        Object.entries(videos).reverse().forEach(([videoId, video]) => {
          const videoElement = document.createElement('div');
          videoElement.className = 'video-card';
          videoElement.style.marginBottom = '2.5rem';
          
          // Créer l'URL d'embed pour Google Drive
          let embedUrl = video.previewUrl;
          if (video.previewUrl.includes('drive.google.com')) {
            const fileId = video.previewUrl.match(/\/d\/(.*?)\//) ? 
                          video.previewUrl.match(/\/d\/(.*?)\//)[1] : 
                          video.previewUrl.split('/').pop().split('?')[0];
            embedUrl = `https://drive.google.com/file/d/${fileId}/preview`;
          }
          
          videoElement.innerHTML = `
            <h4 style="margin-bottom: 1rem; color: var(--text); font-size: 1.5rem; font-weight: 700;">${escapeHtml(video.title)}</h4>
            <div class="video-container">
              <iframe class="video-player" 
                src="${embedUrl}" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            ${video.description ? `<p style="margin: 1.5rem 0; color: var(--text); padding: 1.5rem; background: var(--accent); border-radius: var(--radius-sm); font-size: 1.05rem; line-height: 1.7;">${escapeHtml(video.description)}</p>` : ''}
            <div class="video-actions">
              ${video.downloadUrl ? 
                `<a href="${video.downloadUrl}" target="_blank" class="download-btn">
                  <i class="fas fa-download"></i>
                  Télécharger la vidéo
                </a>` : ''
              }
              ${video.registrationUrl ? 
                `<a href="${video.registrationUrl}" target="_blank" class="registration-btn">
                  <i class="fas fa-user-plus"></i>
                  S'inscrire maintenant
                </a>` : ''
              }
            </div>
          `;
          container.appendChild(videoElement);
        });
      });
    }

    // Get section name from value
    function getSectionName(section) {
      const sections = {
        'microtache': 'Microtache',
        'investissement': 'Investissement',
        'criptomonaie': 'Criptomonaie',
        'bot-trading': 'Bot Trading',
        'live': 'Live'
      };
      return sections[section] || section;
    }

    // Load profile content
    function loadProfileContent(container) {
      if (!currentUser) return;
      
      const userRef = db.ref('users/' + currentUser.uid);
      userRef.once('value').then((snapshot) => {
        const userData = snapshot.val();
        
        container.innerHTML = `
          <div class="card" style="max-width: 900px; margin: 0 auto;">
            <div class="card-header">
              <h3 class="card-title">Mon Profil</h3>
              <div style="background: rgba(37, 99, 235, 0.1); padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.9rem; color: var(--primary); font-weight: 600;">
                <i class="fas fa-user-check"></i> Vérifié
              </div>
            </div>
            <div style="padding: 2.5rem;">
              <div style="text-align: center; margin-bottom: 3rem;">
                <div style="position: relative; display: inline-block;">
                  <img src="${userData.profilePicture || 'https://via.placeholder.com/150'}" 
                       alt="Profile Picture" 
                       style="width: 150px; height: 150px; border-radius: 50%; border: 5px solid white; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                  <div style="position: absolute; bottom: 20px; right: 10px; background: var(--gradient-success); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; border: 3px solid white;">
                    <i class="fas fa-check"></i>
                  </div>
                </div>
                <h2 style="margin-bottom: 0.5rem; font-size: 2rem; color: var(--text);">${userData.name || 'Utilisateur'}</h2>
                <p style="color: var(--text-muted); margin-bottom: 0.5rem; font-size: 1.1rem;">
                  <i class="fas fa-envelope"></i> ${userData.email || ''}
                </p>
                ${userData.bio ? `<p style="color: var(--text-muted); font-style: italic; margin-top: 1rem;">"${userData.bio}"</p>` : ''}
              </div>
              
              <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 3rem;">
                <div style="background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); padding: 1.5rem; border-radius: 20px; text-align: center; border: 1px solid rgba(37, 99, 235, 0.2);">
                  <div style="font-size: 2.5rem; font-weight: 800; color: var(--primary);" id="daysRemaining">30</div>
                  <div style="font-size: 1rem; color: var(--text-muted); font-weight: 600;">Jours restants</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(56, 249, 215, 0.1) 100%); padding: 1.5rem; border-radius: 20px; text-align: center; border: 1px solid rgba(16, 185, 129, 0.2);">
                  <div style="font-size: 2.5rem; font-weight: 800; color: var(--success);" id="videosWatched">0</div>
                  <div style="font-size: 1rem; color: var(--text-muted); font-weight: 600;">Vidéos vues</div>
                </div>
              </div>
              
              <div style="background: white; padding: 2rem; border-radius: 20px; margin-bottom: 2.5rem; box-shadow: var(--shadow); border: 1px solid var(--border);">
                <h4 style="margin-bottom: 1.5rem; color: var(--primary); font-size: 1.3rem; display: flex; align-items: center; gap: 0.75rem;">
                  <i class="fas fa-shield-alt"></i>
                  Statut d'abonnement
                </h4>
                <div id="subscriptionStatus" style="min-height: 80px;">
                  <!-- Le statut sera chargé dynamiquement -->
                </div>
              </div>
              
              <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button class="auth-btn" onclick="editProfile()" style="max-width: 250px; background: var(--gradient-secondary);">
                  <i class="fas fa-edit"></i>
                  Modifier le profil
                </button>
                <button class="auth-btn" onclick="showPage('paymentPage')" style="max-width: 250px; background: var(--gradient-success);">
                  <i class="fas fa-crown"></i>
                  Passer Premium
                </button>
              </div>
            </div>
          </div>
        `;
        
        loadSubscriptionStatus();
      });
    }

    // Load subscription status
    function loadSubscriptionStatus() {
      if (!currentUser) return;
      
      const paymentRef = db.ref('payments/' + currentUser.uid);
      paymentRef.once('value').then((snapshot) => {
        const paymentData = snapshot.val();
        const statusElement = document.getElementById('subscriptionStatus');
        
        if (!paymentData) {
          statusElement.innerHTML = `
            <div style="display: flex; align-items: center; gap: 1rem;">
              <div style="background: rgba(239, 68, 68, 0.1); width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times-circle" style="font-size: 2rem; color: var(--error);"></i>
              </div>
              <div>
                <p style="color: var(--error); font-weight: 600; margin-bottom: 0.25rem;">Aucun abonnement actif</p>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Souscrivez pour accéder à toutes les fonctionnalités</p>
              </div>
            </div>
          `;
          return;
        }
        
        if (paymentData.status === 'confirmed') {
          const confirmedAt = paymentData.confirmedAt || paymentData.createdAt;
          const thirtyDaysInMs = 30 * 24 * 60 * 60 * 1000;
          const now = Date.now();
          const daysLeft = Math.max(0, 30 - Math.floor((now - confirmedAt) / (1000 * 60 * 60 * 24)));
          
          document.getElementById('daysRemaining').textContent = daysLeft;
          
          statusElement.innerHTML = `
            <div style="display: flex; align-items: center; gap: 1rem;">
              <div style="background: rgba(16, 185, 129, 0.1); width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check-circle" style="font-size: 2rem; color: var(--success);"></i>
              </div>
              <div>
                <p style="color: var(--success); font-weight: 600; margin-bottom: 0.25rem;">Abonnement Premium actif</p>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Expire dans ${daysLeft} jour${daysLeft > 1 ? 's' : ''}</p>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: ${(daysLeft / 30) * 100}%;"></div>
                </div>
              </div>
            </div>
          `;
        } else if (paymentData.status === 'pending') {
          statusElement.innerHTML = `
            <div style="display: flex; align-items: center; gap: 1rem;">
              <div style="background: rgba(245, 158, 11, 0.1); width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-clock" style="font-size: 2rem; color: var(--warning);"></i>
              </div>
              <div>
                <p style="color: var(--warning); font-weight: 600; margin-bottom: 0.25rem;">Paiement en attente de confirmation</p>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Notre équipe traite votre demande sous 24h</p>
              </div>
            </div>
          `;
        } else {
          statusElement.innerHTML = `
            <div style="display: flex; align-items: center; gap: 1rem;">
              <div style="background: rgba(239, 68, 68, 0.1); width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times-circle" style="font-size: 2rem; color: var(--error);"></i>
              </div>
              <div>
                <p style="color: var(--error); font-weight: 600; margin-bottom: 0.25rem;">Abonnement expiré</p>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Renouvelez votre abonnement pour continuer</p>
              </div>
            </div>
          `;
        }
      });
    }

    // Load annonces content
    function loadAnnoncesContent(container) {
      container.innerHTML = `
        <div class="card" style="max-width: 900px; margin: 0 auto;">
          <div class="card-header">
            <h3 class="card-title">Annonces & Actualités</h3>
            <div style="background: rgba(245, 158, 11, 0.1); padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.9rem; color: var(--warning); font-weight: 600;">
              <i class="fas fa-bullhorn"></i> ${new Date().getDate()} nouvelles
            </div>
          </div>
          <div style="padding: 1.5rem;">
            <div id="annoncesList">
              <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2.5rem; color: var(--primary);"></i>
                <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Chargement des annonces...</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      loadAnnonces();
    }

    // Load annonces
    function loadAnnonces() {
      if (!currentUser) return;
      
      const annoncesRef = db.ref('annonces').orderByChild('timestamp');
      annoncesRef.on('value', (snapshot) => {
        const annonces = snapshot.val();
        const annoncesList = document.getElementById('annoncesList');
        
        if (!annoncesList) return;
        
        annoncesList.innerHTML = '';

        if (!annonces) {
          annoncesList.innerHTML = `
            <div style="text-align: center; padding: 3rem;">
              <i class="fas fa-bullhorn" style="font-size: 3.5rem; color: var(--text-muted);"></i>
              <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Aucune annonce pour le moment</p>
              <p style="margin-top: 0.5rem; color: var(--text-muted);">Revenez plus tard pour les dernières actualités</p>
            </div>
          `;
          return;
        }
        
        Object.entries(annonces).reverse().forEach(([annonceId, annonce]) => {
          const annonceElement = document.createElement('div');
          annonceElement.className = 'annonce-item';
          
          const date = new Date(annonce.timestamp || annonce.date);
          const formattedDate = date.toLocaleDateString('fr-FR', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          annonceElement.innerHTML = `
            <div class="annonce-header">
              <h4 class="annonce-title">${escapeHtml(annonce.titre)}</h4>
              <div class="annonce-date">${formattedDate}</div>
            </div>
            <div class="annonce-content">
              ${annonce.contenu}
            </div>
            <div class="annonce-footer">
              <div class="annonce-author">
                <i class="fas fa-user-tie"></i> Administrateur
              </div>
              <div class="annonce-actions">
                <button class="annonce-expand-btn" onclick="expandAnnonce(this)">
                  <i class="fas fa-expand-alt"></i>
                  Lire plus
                </button>
              </div>
            </div>
          `;
          
          annoncesList.appendChild(annonceElement);
        });
      });
    }

    // Load notifications content
    function loadNotificationsContent(container) {
      container.innerHTML = `
        <div class="card" style="max-width: 900px; margin: 0 auto;">
          <div class="card-header">
            <h3 class="card-title">Mes Notifications</h3>
            <button class="auth-btn" onclick="markAllNotificationsAsRead()" style="max-width: 200px; padding: 0.5rem 1rem; font-size: 0.9rem; background: var(--gradient-secondary);">
              <i class="fas fa-check-double"></i>
              Tout marquer comme lu
            </button>
          </div>
          <div style="padding: 1.5rem;">
            <div id="notificationsList">
              <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2.5rem; color: var(--primary);"></i>
                <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Chargement des notifications...</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      loadNotifications();
    }

    // Load notifications
    function loadNotifications() {
      if (!currentUser) return;

      const notificationsRef = db.ref(`notifications/${currentUser.uid}`).orderByChild('timestamp');
      notificationsRef.on('value', (snapshot) => {
        const notifications = snapshot.val();
        const notificationsList = document.getElementById('notificationsList');
        const notificationCount = document.getElementById('notificationCount');
        
        if (notificationsList) {
          notificationsList.innerHTML = '';
        }
        
        let unreadCount = 0;

        if (!notifications) {
          if (notificationsList) {
            notificationsList.innerHTML = `
              <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-bell-slash" style="font-size: 3.5rem; color: var(--text-muted);"></i>
                <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 1.1rem;">Aucune notification</p>
                <p style="margin-top: 0.5rem; color: var(--text-muted);">Vous serez notifié des nouvelles activités</p>
              </div>
            `;
          }
          if (notificationCount) {
            notificationCount.textContent = '0';
          }
          return;
        }

        Object.entries(notifications).reverse().forEach(([notificationId, notification]) => {
          if (!notification.read) unreadCount++;
          
          if (notificationsList) {
            const notificationElement = document.createElement('div');
            notificationElement.className = `notification-item ${notification.read ? '' : 'unread'}`;
            notificationElement.innerHTML = `
              <div class="notification-icon">
                <i class="fas fa-${notification.type === 'payment' ? 'credit-card' : notification.type === 'annonce' ? 'bullhorn' : 'comment'}"></i>
              </div>
              <div class="notification-content">
                <div class="notification-text">${escapeHtml(notification.text)}</div>
                <div class="notification-time">
                  <i class="fas fa-clock"></i>
                  ${formatTime(notification.timestamp)}
                </div>
              </div>
            `;
            notificationElement.addEventListener('click', () => {
              markNotificationAsRead(notificationId);
            });
            notificationsList.appendChild(notificationElement);
          }
        });

        if (notificationCount) {
          notificationCount.textContent = unreadCount > 0 ? unreadCount : '0';
        }
      });
    }

    // Mark notification as read
    function markNotificationAsRead(notificationId) {
      if (!currentUser) return;

      const notificationRef = db.ref(`notifications/${currentUser.uid}/${notificationId}`);
      notificationRef.update({
        read: true
      }).then(() => {
        // Recharger les notifications
        loadNotifications();
      });
    }

    // Marquer toutes les notifications comme lues
    function markAllNotificationsAsRead() {
      if (!currentUser) return;

      const notificationsRef = db.ref(`notifications/${currentUser.uid}`);
      notificationsRef.once('value').then((snapshot) => {
        const notifications = snapshot.val();
        if (!notifications) return;

        const updates = {};
        Object.keys(notifications).forEach(notificationId => {
          updates[`notifications/${currentUser.uid}/${notificationId}/read`] = true;
        });

        db.ref().update(updates).then(() => {
          loadNotifications();
        });
      });
    }

    // Setup home page
    function setupHomePage() {
      // Charger les notifications
      loadNotifications();
      
      // Charger le statut d'abonnement
      if (currentUser) {
        loadSubscriptionStatus();
      }
      
      // Mettre à jour les statistiques
      updateStats();
    }

    // Edit profile
    function editProfile() {
      alert('Fonctionnalité de modification de profil à venir dans la prochaine mise à jour');
    }

    // Show admin login
    function showAdminLogin() {
      showPage('adminPage');
      closeMobileMenu();
    }

    // Logout
    function logout() {
      auth.signOut().then(() => {
        currentUser = null;
        showPage('loginPage');
        closeMobileMenu();
      });
    }

    // Utility function to escape HTML
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Format timestamp to readable time
    function formatTime(timestamp) {
      const now = new Date();
      const time = new Date(timestamp);
      const diffMs = now - time;
      const diffMins = Math.floor(diffMs / 60000);
      const diffHours = Math.floor(diffMs / 3600000);
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      
      if (diffMins < 1) return 'À l\'instant';
      if (diffMins < 60) return `Il y a ${diffMins} min`;
      if (diffHours < 24) return `Il y a ${diffHours} h`;
      if (diffDays === 1) return 'Hier';
      if (diffDays < 7) return `Il y a ${diffDays} jours`;
      
      return time.toLocaleDateString('fr-FR');
    }

    // Fonction pour étendre une annonce
    function expandAnnonce(button) {
      const annonceItem = button.closest('.annonce-item');
      const content = annonceItem.querySelector('.annonce-content');
      
      if (content.style.maxHeight && content.style.maxHeight !== 'none') {
        content.style.maxHeight = 'none';
        button.innerHTML = '<i class="fas fa-compress-alt"></i> Réduire';
      } else {
        content.style.maxHeight = '200px';
        content.style.overflow = 'hidden';
        button.innerHTML = '<i class="fas fa-expand-alt"></i> Lire plus';
      }
    }

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>